<%- include("../includes/head.ejs") %>
<link rel="stylesheet" href="/css/product.css">
</head>

<body>
     <%- include("../includes/navigation.ejs") %>
  
     <main class="centered">
          <h2 class="cart">Shopping Cart</h2>
            
               <% if (products.length > 0 ) { %>
                  <div class="shop-cart">
                    <div>
                         <div class="cart-header">
                              <span class="header-field">
                                   Quantity
                              </span> 
                              <span class="header-field">
                                   Title
                              </span>
          
                              <span class="header-field">
                                   Image
                              </span>                      
                              <span class="header-field">
                                   Price
                              </span>
                              
                              <span class="header-field">
                                   Remove
                              </span>
                               
                         </div>    
                    </div>
                    <div class="card">                 
                         <% products.map(prod => { %>
                         
                              <div class="product__cart">
                                   <span class="cart-item">
                                        <%= prod.quantity%>
                                   </span>     
                                   <span class="cart-item">
                                        <%= prod.title%>
                                   </span>
                                   <span class="cart-item">
                                        <img class="cart-image" src="<%=prod.imageUrl%>"  alt="<%= prod.title%>"> 
                                   </span>                   
                                   <span class="cart-item">
                                        $<%= prod.price%>
                                   </span>
                                   <form action="/cart-delete-item" method="POST" class="cart-item">
                                        <input type="hidden" name="id" value="<%= prod._id%>">
                                        <button class="btn" type="submit">X</button>
                                   </form>
                              </div>
                         <% })%>
                    </div>
                  </div>
                    <div class="cart-btn">
                         <form action="/create-order" method="POST">
                              <button type="submit" class="btn">Order Now!</button>
                         </form>
                    </div>
          </div>
          <%}else{%>
               <div class="no-products">
                    <h3>Shopping Cart is empty</h3>
               </div>
          <%}%>
     </main>

<%- include("../includes/end.ejs") %>